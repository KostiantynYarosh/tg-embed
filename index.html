<!doctype html>
<html lang="ru" data-theme="light">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600&display=swap" rel="stylesheet">

</head>
<body>
  <header>
    
    <div class="header-actions">
      <button class="iconBtn" id="btnThemeLight" title="Light theme" aria-label="Light theme">
        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="4"></circle>
          <line x1="12" y1="2" x2="12" y2="5"></line>
          <line x1="12" y1="19" x2="12" y2="22"></line>
          <line x1="2" y1="12" x2="5" y2="12"></line>
          <line x1="19" y1="12" x2="22" y2="12"></line>
          <line x1="4.22" y1="4.22" x2="6.34" y2="6.34"></line>
          <line x1="17.66" y1="17.66" x2="19.78" y2="19.78"></line>
          <line x1="4.22" y1="19.78" x2="6.34" y2="17.66"></line>
          <line x1="17.66" y1="6.34" x2="19.78" y2="4.22"></line>
        </svg>
      </button>
      <button class="iconBtn" id="btnThemeDark" title="Dark theme" aria-label="Dark theme">
        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 12.8A9 9 0 1 1 11.2 3a7 7 0 0 0 9.8 9.8z"></path>
        </svg>
      </button>
    </div>
  </header>


  <main>
    <aside class="rail" aria-label="Formatting">
      <button class="btn" id="bUndo" title="Undo">
        <svg width="20" height="20" viewBox="0 0 497 575" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M108.489 30L30.7071 107.782C30.3166 108.172 30.3166 108.805 30.7071 109.196L108.489 186.978" stroke="currentColor" stroke-width="50" stroke-linecap="round"/>
          <path d="M30 326.5C30 447.174 127.826 545 248.5 545C369.174 545 467 447.174 467 326.5C467 230.494 405.081 148.95 319 119.623C296.882 112.088 273.168 108 248.5 108H59.5" stroke="currentColor" stroke-width="50" stroke-linecap="round"/>
        </svg>
      </button>
        <button class="btn" id="bEmoji" title="Emoji" aria-label="Emoji">
          <svg width="20" height="20" viewBox="0 0 793 793" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="396.5" cy="396.5" r="365.5" stroke="black" stroke-width="62"/>
            <path d="M202.695 309.789L285.671 268.251C293.772 264.195 293.772 252.634 285.671 248.578L202.695 207.039C201.108 206.379 199.674 205.398 198.484 204.158C197.293 202.918 196.371 201.446 195.775 199.834C195.179 198.221 194.922 196.503 195.02 194.787C195.118 193.071 195.569 191.394 196.345 189.86C197.12 188.326 198.204 186.968 199.528 185.872C200.852 184.776 202.388 183.964 204.04 183.489C205.691 183.013 207.424 182.883 209.128 183.106C210.832 183.33 212.472 183.903 213.945 184.789L337.803 246.719C338.562 247.098 339.258 247.585 339.948 248.08C339.991 248.111 340.032 248.14 340.07 248.164C341.359 248.874 342.449 249.89 343.245 251.12C343.472 251.472 343.748 251.792 344.013 252.117C344.081 252.2 344.145 252.287 344.206 252.376C344.381 252.637 344.445 252.871 344.445 253.186C344.445 253.448 344.496 253.789 344.587 254.035C344.843 254.728 345.046 255.44 345.195 256.164C345.528 257.646 345.528 259.183 345.195 260.664C345.047 261.388 344.844 262.098 344.588 262.791C344.497 263.039 344.445 263.197 344.445 263.461C344.445 263.774 344.378 264.188 344.226 264.461C343.984 264.897 343.702 265.31 343.383 265.695C343.263 265.84 343.176 266.014 343.169 266.203C343.16 266.495 343.079 266.79 342.873 266.997C341.928 267.943 340.859 268.756 339.695 269.414L214.695 331.914C212.757 333.015 210.545 333.536 208.32 333.414C206.011 333.407 203.75 332.761 201.786 331.548C199.823 330.334 198.233 328.601 197.195 326.539C195.712 323.587 195.458 320.168 196.489 317.03C197.52 313.891 199.751 311.288 202.695 309.789Z" fill="currentColor"/>
            <path d="M445.774 257.188C445.777 256.846 445.792 256.505 445.82 256.164C445.968 255.44 446.171 254.728 446.427 254.035C446.518 253.789 446.57 253.634 446.57 253.372C446.57 253.057 446.633 252.637 446.809 252.376C446.869 252.287 446.933 252.2 447.001 252.117C447.267 251.792 447.542 251.472 447.77 251.12C448.393 250.157 449.196 249.325 450.134 248.669C450.653 248.306 451.111 247.961 451.612 247.572C451.863 247.377 452.212 247.218 452.497 247.076L577.07 184.789C578.543 183.903 580.182 183.33 581.887 183.106C583.591 182.883 585.323 183.013 586.975 183.489C588.627 183.964 590.162 184.776 591.486 185.872C592.81 186.968 593.894 188.326 594.67 189.86C595.445 191.394 595.896 193.071 595.994 194.787C596.092 196.503 595.835 198.221 595.239 199.834C594.643 201.446 593.721 202.918 592.531 204.158C591.34 205.398 589.907 206.379 588.32 207.039L505.884 248.56C497.804 252.63 497.818 264.171 505.908 268.221L588.945 309.789C591.889 311.288 594.12 313.891 595.151 317.03C596.181 320.168 595.927 323.587 594.445 326.539C593.406 328.601 591.817 330.334 589.853 331.548C587.889 332.761 585.628 333.407 583.32 333.414C581.359 333.438 579.424 332.965 577.695 332.039L452.695 269.539C451.507 268.868 450.418 268.035 449.46 267.065C449.287 266.89 449.195 266.653 449.195 266.407C449.195 266.17 449.106 265.943 448.957 265.759C448.658 265.392 448.393 264.999 448.163 264.586C448.011 264.313 447.945 264.085 447.945 263.773C447.945 263.508 447.893 263.164 447.801 262.916C447.704 262.654 447.615 262.39 447.534 262.123C447.269 261.255 446.901 260.42 446.447 259.634C446.423 259.593 446.399 259.551 446.375 259.509C445.975 258.802 445.768 258 445.774 257.188Z" fill="currentColor"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M206 394H581C584.315 394 587.495 395.317 589.839 397.661C592.183 400.005 593.5 403.185 593.5 406.5C593.5 530.625 503.75 631.5 393.5 631.5C283.25 631.5 193.5 530.625 193.5 406.5C193.5 403.185 194.817 400.005 197.161 397.661C199.505 395.317 202.685 394 206 394ZM230.211 419H556.9C563.205 419 568.245 424.293 567.587 430.562C566.51 440.813 564.731 450.979 562.26 460.988C561.084 465.754 556.742 469 551.833 469H235.582C230.714 469 226.397 465.806 225.182 461.091C222.603 451.089 220.717 440.922 219.536 430.664C218.81 424.36 223.865 419 230.211 419ZM447.945 596.543C430.582 603.118 412.137 606.506 393.5 606.506C374.863 606.506 356.418 603.118 339.055 596.543C317.808 586.988 309.341 581.804 297.131 572.702C274.83 555.576 256.524 533.828 243.456 508.981C239.793 502.016 245.081 494 252.95 494H534.05C541.919 494 547.207 502.016 543.544 508.981C528.857 536.907 507.553 560.917 481.398 578.853L481.338 578.894C481.271 578.94 481.318 579.045 481.398 579.026C495.5 569.5 492.1 573.47 447.945 596.543Z" fill="currentColor"/>
            <path d="M483.76 580.827C483.746 580.807 481.412 578.873 481.398 578.853M483.76 580.827C483.789 580.87 481.447 579.013 481.398 579.026M483.76 580.827L481.398 578.853M481.398 578.853C507.553 560.917 528.857 536.907 543.544 508.981C547.207 502.016 541.919 494 534.05 494H252.95C245.081 494 239.793 502.016 243.456 508.981C256.524 533.828 274.83 555.576 297.131 572.702C309.341 581.804 317.808 586.988 339.055 596.543C356.418 603.118 374.863 606.506 393.5 606.506C412.137 606.506 430.582 603.118 447.945 596.543C492.1 573.47 495.5 569.5 481.398 579.026M481.398 578.853C481.378 578.866 481.358 578.88 481.338 578.894M481.398 578.853L481.338 578.894M481.338 578.894C481.271 578.94 481.318 579.045 481.398 579.026M581 394H206C202.685 394 199.505 395.317 197.161 397.661C194.817 400.005 193.5 403.185 193.5 406.5C193.5 530.625 283.25 631.5 393.5 631.5C503.75 631.5 593.5 530.625 593.5 406.5C593.5 403.185 592.183 400.005 589.839 397.661C587.495 395.317 584.315 394 581 394ZM230.211 419H556.9C563.205 419 568.245 424.293 567.587 430.562C566.51 440.813 564.731 450.979 562.26 460.988C561.084 465.754 556.742 469 551.833 469H235.582C230.714 469 226.397 465.806 225.182 461.091C222.603 451.089 220.717 440.922 219.536 430.664C218.81 424.36 223.865 419 230.211 419ZM445.774 257.188C445.777 256.846 445.792 256.505 445.82 256.164C445.968 255.44 446.171 254.728 446.427 254.035C446.518 253.789 446.57 253.634 446.57 253.372C446.57 253.057 446.633 252.637 446.809 252.376C446.869 252.287 446.933 252.2 447.001 252.117C447.267 251.792 447.542 251.472 447.77 251.12C448.393 250.157 449.196 249.325 450.134 248.669C450.653 248.306 451.111 247.961 451.612 247.572C451.863 247.377 452.212 247.218 452.497 247.076L577.07 184.789C578.543 183.903 580.182 183.33 581.887 183.106C583.591 182.883 585.323 183.013 586.975 183.489C588.627 183.964 590.162 184.776 591.486 185.872C592.81 186.968 593.894 188.326 594.67 189.86C595.445 191.394 595.896 193.071 595.994 194.787C596.092 196.503 595.835 198.221 595.239 199.834C594.643 201.446 593.721 202.918 592.531 204.158C591.34 205.398 589.907 206.379 588.32 207.039L505.884 248.56C497.804 252.63 497.818 264.171 505.908 268.221L588.945 309.789C591.889 311.288 594.12 313.891 595.151 317.03C596.181 320.168 595.927 323.587 594.445 326.539C593.406 328.601 591.817 330.334 589.853 331.548C587.889 332.761 585.628 333.407 583.32 333.414C581.359 333.438 579.424 332.965 577.695 332.039L452.695 269.539C451.507 268.868 450.418 268.035 449.46 267.065C449.287 266.89 449.195 266.653 449.195 266.407C449.195 266.17 449.106 265.943 448.957 265.759C448.658 265.392 448.393 264.999 448.163 264.586C448.011 264.313 447.945 264.085 447.945 263.773C447.945 263.508 447.893 263.164 447.801 262.916C447.704 262.654 447.615 262.39 447.534 262.123C447.269 261.255 446.901 260.42 446.447 259.634C446.423 259.593 446.399 259.551 446.375 259.509C445.975 258.802 445.768 258 445.774 257.188ZM202.695 309.789L285.671 268.251C293.772 264.195 293.772 252.634 285.671 248.578L202.695 207.039C201.108 206.379 199.674 205.398 198.484 204.158C197.293 202.918 196.371 201.446 195.775 199.834C195.179 198.221 194.922 196.503 195.02 194.787C195.118 193.071 195.569 191.394 196.345 189.86C197.12 188.326 198.204 186.968 199.528 185.872C200.852 184.776 202.388 183.964 204.04 183.489C205.691 183.013 207.424 182.883 209.128 183.106C210.832 183.33 212.472 183.903 213.945 184.789L337.803 246.719C338.562 247.098 339.258 247.585 339.948 248.08C339.991 248.111 340.032 248.14 340.07 248.164C341.359 248.874 342.449 249.89 343.245 251.12C343.472 251.472 343.748 251.792 344.013 252.117C344.081 252.2 344.145 252.287 344.206 252.376C344.381 252.637 344.445 252.871 344.445 253.186C344.445 253.448 344.496 253.789 344.587 254.035C344.843 254.728 345.046 255.44 345.195 256.164C345.528 257.646 345.528 259.183 345.195 260.664C345.047 261.388 344.844 262.098 344.588 262.791C344.497 263.039 344.445 263.197 344.445 263.461C344.445 263.774 344.378 264.188 344.226 264.461C343.984 264.897 343.702 265.31 343.383 265.695C343.263 265.84 343.176 266.014 343.169 266.203C343.16 266.495 343.079 266.79 342.873 266.997C341.928 267.943 340.859 268.756 339.695 269.414L214.695 331.914C212.757 333.015 210.545 333.536 208.32 333.414C206.011 333.407 203.75 332.761 201.786 331.548C199.823 330.334 198.233 328.601 197.195 326.539C195.712 323.587 195.458 320.168 196.489 317.03C197.52 313.891 199.751 311.288 202.695 309.789Z" stroke="currentColor" stroke-width="26"/>
          </svg>
        </button>
      <button class="btn" id="bBold"      title="Bold"><span>B</span></button>
      <button class="btn" id="bItalic"    title="Italic"><span>I</span></button>
      <button class="btn" id="bUnderline" title="Underline"><span>U</span></button>
      <button class="btn" id="bStrike"    title="Strikethrough"><span>S</span></button>
      <button class="btn" id="bMono"      title="Monospace"><span>M</span></button>
      <button class="btn" id="bQuote"     title="Quote with <: ... :>"><span>Q</span></button>
      <button class="btn" id="bCode"      title="Code block"><span>≣</span></button>
      <button class="btn" id="bSpoiler" title="Spoiler" aria-label="Spoiler">
        <svg viewBox="0 0 24 24" width="18" height="18" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
          <g transform="translate(3,3)">
            <circle cx="2" cy="2" r="1.2"/>
            <circle cx="8" cy="2" r="1.2"/>
            <circle cx="14" cy="2" r="1.2"/>
            <circle cx="2" cy="8" r="1.2"/>
            <circle cx="8" cy="8" r="1.2"/>
            <circle cx="14" cy="8" r="1.2"/>
            <circle cx="2" cy="14" r="1.2"/>
            <circle cx="8" cy="14" r="1.2"/>
            <circle cx="14" cy="14" r="1.2"/>
          </g>
        </svg>
      </button>
      <button class="btn" id="bLink" title="Link" aria-label="Link">
        <svg viewBox="0 0 24 24" width="18" height="18" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M15 7h3a5 5 0 1 1 0 10h-3"/>
          <path d="M9 17H6a5 5 0 1 1 0-10h3"/>
          <line x1="8" y1="12" x2="16" y2="12"/>
        </svg>
      </button>
      <button class="btn" id="bClear" title="Clear selection" aria-label="Clear selection">
        <svg viewBox="0 0 24 24" width="18" height="18" xmlns="http://www.w3.org/2000/svg"
            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="9"/>
          <line x1="7" y1="17" x2="17" y2="7"/>
        </svg>
      </button>
      <div class="rail_spacer"></div>
    </aside>
    <section class="panel editor">
      <textarea id="editor" class="editor_ta" placeholder="Введите текст...">
Be creative
</textarea>
    </section>

    <section class="panel preview">
      <div class="preview_wrap">
        <div class="chat">
          <div class="row">
            <div class="avatar">T</div>
            <div class="body">
              <div class="meta">@your_channel · now</div>
              <div id="bubble" class="bubble"></div>
            </div>
          </div>
        </div>
      </div>
    <div class="send-button" id="sendBtnWrap" style="display:none">
      <button id="sendBtn" class="b primary" type="button">
        Send to Chat
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" 
            fill="currentColor" viewBox="0 0 24 24" style="margin-right:6px">
          <path d="M22 2 11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M22 2 15 22l-4-9-9-4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>
    </section>
    <aside class="panel shortcuts" aria-label="Shortcuts">
      <div class="shortcuts__title">Shortcuts</div>
      <ul class="shortcuts__list">
        <li><kbd>Ctrl</kbd> + <kbd>Z</kbd> → Undo</li>
        <li><kbd>Ctrl</kbd> + <kbd>B</kbd> → Bold</li>
        <li><kbd>Ctrl</kbd> + <kbd>I</kbd> → Italic</li>
        <li><kbd>Ctrl</kbd> + <kbd>U</kbd> → Underline</li>
        <li><kbd>Ctrl</kbd> + <kbd>K</kbd> → Paste links</li>
        <li><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>.</kbd> → Quote</li>
        <li><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>X</kbd> → Strikethrough</li>
        <li><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>M</kbd> → Inline code</li>
        <li><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>C</kbd> → Code block</li>
        <li><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>P</kbd> → Spoiler</li>
      </ul>
    </aside>
  </main>
  <div class="hint">Hyperlinks and quotes work differently in Telegram</div>

  <div id="linkModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="linkTitle">
    <div class="dlg">
      <div class="dlg_head">
        <div id="linkTitle" class="dlg_title">Insert link</div>
        <button id="linkClose" class="dlg_close" title="Close">×</button>
      </div>
      <div class="dlg_body">
        <label class="field">
          <span>Text</span>
          <input type="text" id="linkText" placeholder="Link text">
        </label>
        <label class="field">
          <span>URL</span>
          <input type="url" id="linkUrl" value="https://" placeholder="https://example.com/path">
        </label>
      </div>
      <div class="dlg_actions">
        <button id="linkCancel" class="b ghost" type="button">Cancel</button>
        <button id="linkOk" class="b primary" type="button">Insert</button>
      </div>
    </div>
  </div>
  <div id="emojiPortal"></div>
  <script src="app.js"></script>
</body>
</html>
